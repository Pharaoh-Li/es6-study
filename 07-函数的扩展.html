<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script>
    // function foo() {
    //     setTimeout(() => {
    //         console.log(this);
    //         console.log(this.id);
    //     },1000)
    // }
    // foo.apply({id:43})
    // function Timer() {
    //   this.s1 = 0;
    //   this.s2 = 0;
    //   // 箭头函数
    //   setInterval(() => this.s1++, 1000);
    //   // 普通函数
    //   setInterval(function () {
    //     this.s2++;
    //   }, 1000);
    // }

    // var timer = new Timer();

    // setTimeout(() => console.log("s1: ", timer.s1), 3100);
    // setTimeout(() => console.log("s2: ", timer.s2), 3100);
    // s1: 3
    // s2: 0

    // function foo() {
    //   return () => {
    //     return () => {
    //       return () => {
    //         console.log("id:", this.id);
    //       };
    //     };
    //   };
    // }

    // var f = foo.call({ id: 1 });

    // var t1 = f.call({ id: 2 })()(); // id: 1
    // var t2 = f().call({ id: 3 })(); // id: 1
    // var t3 = f()().call({ id: 4 }); // id: 1

    // function foo() {
    //   setTimeout(() => {
    //     console.log("args:", arguments);
    //   }, 100);
    // }

    // foo(2, 4, 6, 8);

    // const cat = {
    //     lives: 9,
    //     jumps: () => {
    //         console.log(this); //window
    //         this.lives --
    //     },
    //     jumps2: function() {
    //         console.log(this); //cat
    //         this.lives --
    //     }
    // }
    // cat.jumps()
    // cat.jumps2()
    // console.log(cat.lives);

    // const pipe = (x) => ({ pipe: (y) => ({ pipe: (z) => x + y + z})})
    // const a = pipe(1)
    //             .pipe(2)
    //             .pipe(3)
    // console.log(a);

    //尾调用
    // function f() {
    //     return g()
    // }

    //尾递归
    function factorial(n, total = 1) {
      if (n === 1) return total;
      return factorial(n - 1, n * total);
    }

    console.log(factorial(5)); // 120
  </script>
</html>
